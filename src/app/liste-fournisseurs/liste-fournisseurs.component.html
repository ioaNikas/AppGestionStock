<div class="container">
  <div class="text-center">
    <h3>Fournisseurs enregistrés</h3>
  </div>
  <br>
  <table class="table">
    <thead class="thead-light">
      <th>Id</th>
      <th><i class="material-icons">domain</i> Raison sociale </th>
      <th><i class="material-icons">home</i> Adresse </th>
      <th><i class="material-icons">phone</i> Tel</th>
      <th><i class="material-icons">email</i> Mail</th>
      <th>Supprimer</th>
      <th>Modifier</th>
    </thead>
    <tbody *ngFor="let fournisseur of fournisseurs; let i = index">
      <tr>
        <td>{{fournisseur.id}}</td>
        <td><b>{{fournisseur.raisonSociale}}</b></td>
        <td>{{fournisseur.adresse}}</td>
        <td>{{fournisseur.tel}}</td>
        <td>{{fournisseur.mail}}</td>
        <td><i (click)="deleteFournisseur(fournisseur.id)" class="material-icons suppression" style="color:red;">delete</i>
        </td>
        <td><i (click)="fenetreModification(fournisseur)" [routerLink]="['/accueil/liste-fournisseurs/modifier-fournisseur', fournisseur.id]"
            class="material-icons suppression" style="color:rgb(33, 131, 223);">create</i></td>
      </tr>
    </tbody>
  </table>

  <form *ngIf="modification == false" class="col-md-8 formulaire" (ngSubmit)="onSubmit()" [formGroup]="formCreate">
    <div class="text-center">
      <h4>Ajouter un nouveau fournisseur</h4>
    </div>
    <br>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="raisonSociale">RaisonSociale</label>
        <input id="raisonSociale" formControlName="raisonSociale" type="text" class="form-control" placeholder="Nom du fournisseur">
      </div>

      <div class="form-group col-md-6">
        <label for="adresse">Adresse</label>
        <input id="adresse" formControlName="adresse" type="text" class="form-control" placeholder="Adresse du fournisseur">
      </div>
    </div>

    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="tel">N° de téléphone</label>
        <input [maxlength]="10" id="tel" formControlName="tel" type="text" class="form-control" placeholder="Numéro de téléphone">
      </div>

      <div class="form-group col-md-6">
        <label for="mail">Mail</label>
        <input id="mail" formControlName="mail" type="email" class="form-control" placeholder="nom@domaine.com">
      </div>
    </div>

    <div class="form-group d-flex justify-content-around">
      <button type="submit" class="btn btn-success ">Valider l'ajout</button>
    </div>
    <p *ngIf="submitted == true" class="confirmation">Le fournisseur a bien été ajouté à la base de donnée !</p>
    <p *ngIf="errorMessage == true" class="erreur">Une erreur est survenue !</p>

  </form>

  <form *ngIf="modification == true" class="col-md-8 formulaire" (ngSubmit)="onUpdate()" [formGroup]="formUpdate">
    <div class="text-center">
      <h4>Modifier le fournisseur avec l'id : {{fournisseur.id}}</h4>
    </div>
    <br>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="raisonSociale">RaisonSociale</label>
        <input id="raisonSociale" formControlName="raisonSociale" type="text" class="form-control" placeholder="{{fournisseur.raisonSociale}}">
      </div>

      <div class="form-group col-md-6">
        <label for="adresse">Adresse</label>
        <input id="adresse" formControlName="adresse" type="text" class="form-control" placeholder="{{fournisseur.adresse}}">
      </div>
    </div>

    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="tel">N° de téléphone</label>
        <input [maxlength]="10" id="tel" formControlName="tel" type="text" class="form-control" placeholder="{{fournisseur.tel}}">
      </div>

      <div class="form-group col-md-6">
        <label for="mail">Mail</label>
        <input id="mail" formControlName="mail" type="email" class="form-control" placeholder="{{fournisseur.mail}}">
      </div>
    </div>

    <div class="form-group d-flex justify-content-around">
        <button (click)="modification = false" class="btn btn-secondary ">Annuler les modifications</button>
      <button type="submit" class="btn btn-success ">Valider les modifications</button>
    </div>
    <p *ngIf="submitted == true" class="confirmation">Le fournisseur a bien modifié !</p>
    <p *ngIf="errorMessage == true" class="erreur">Veuillez remplir tous les champs !</p>
  </form>
</div>